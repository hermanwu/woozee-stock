<app-title-menu>
  <div left-items class="inline-display">
    <h1>Latest Investing Ideas</h1>

    <!-- <mat-chip-list class="chip-list" [multiple]="true" selectable>
      <mat-chip
        (click)="toggleChip(NoteType.Stats)"
        [selected]="chips.has(NoteType.Stats)"
        >Numbers</mat-chip
      >

      <mat-chip
        (click)="toggleChip(NoteType.Action)"
        [selected]="chips.has(NoteType.Action)"
        >Actions</mat-chip
      >
      <mat-chip
        (click)="toggleChip(NoteType.Opinion)"
        [selected]="chips.has(NoteType.Opinion)"
        >Opinions</mat-chip
      >
    </mat-chip-list> -->
  </div>

  <div right-items>
    <button mat-icon-button [matMenuTriggerFor]="newsMenu">
      <mat-icon>more_horiz</mat-icon>
    </button>

    <mat-menu #newsMenu="matMenu">
      <button
        mat-menu-item
        (click)="openDailyReportDialog()"
        [disabled]="environment.production"
      >
        Daily Report
      </button>
      <button mat-menu-item (click)="showTools = !showTools" disabled>
        <mat-icon>filter_alt</mat-icon>
      </button>
    </mat-menu>
  </div>
</app-title-menu>

<div *ngIf="showTools"></div>

<h2>💬 Quotes</h2>

<div class="news-card" *ngFor="let item of quotes">
  <app-card>
    <div class="logo-image">
      <!-- <app-image-display
          [imageLink]="
            stockUuidToStockMap.get(stockUuid)?.largeLogoLink ||
            stockUuidToStockMap.get(stockUuid)?.logoLink
          "
        >
        </app-image-display> -->
      <img [src]="item.imageLink" />
    </div>
    <div>📚 {{ item.sourceType }}: {{ item.sourceName }}</div>
    <div>✍️ {{ item.authorName }}</div>
    <div>💬 "{{ item.content }}"</div>
  </app-card>
</div>

<h2>🎙️ Earnings</h2>

<div class="news-card" *ngFor="let item of earnings">
  <app-card>
    <div class="logo-image" *ngIf="item.imageLink">
      <!-- <app-image-display
          [imageLink]="
            stockUuidToStockMap.get(stockUuid)?.largeLogoLink ||
            stockUuidToStockMap.get(stockUuid)?.logoLink
          "
        >
        </app-image-display> -->
      <img [src]="item.imageLink" />
    </div>
    <div>
      <app-tag-display [tagUuid]="item?.targets?.[0]"></app-tag-display>
      Financial Results on
      <app-date-display [date]="item.releasedDate"></app-date-display>
    </div>

    <div *ngIf="item.data?.length > 0">
      <strong>Numbers</strong>
      <div *ngFor="let data of item?.data">
        🔹 {{ data.name }}:
        <app-stats-display [statsDisplay]="data"></app-stats-display>

        <ng-container *ngIf="data.data">
          <div *ngFor="let data2 of data?.data">
            🔹 {{ data2.name }}:
            <app-stats-display [statsDisplay]="data2"></app-stats-display>
          </div>
        </ng-container>
      </div>
    </div>

    <div *ngIf="item?.documents?.length > 0">
      <strong>Documents</strong>
      <div *ngFor="let document of item?.documents">
        <a href="{{ document.link }}" target="_blank">{{ document.name }}</a>
      </div>
    </div>

    <div *ngIf="item.content">💬 "{{ item.content }}"</div>
  </app-card>
</div>

<div>
  <h2>Opinions</h2>
</div>

<div>
  <h2>📰 Events</h2>
  <div
    class="news-card"
    [style.backgroundColor]="bgColor"
    *ngFor="let stockUuid of stockUuidToStockMap.keys()"
  >
    <app-card>
      <div class="logo-image">
        <!-- <app-image-display
          [imageLink]="
            stockUuidToStockMap.get(stockUuid)?.largeLogoLink ||
            stockUuidToStockMap.get(stockUuid)?.logoLink
          "
        >
        </app-image-display> -->
        <img
          [src]="
            stockUuidToStockMap.get(stockUuid)?.largeLogoLink ||
            stockUuidToStockMap.get(stockUuid)?.logoLink
          "
        />
      </div>

      <div *ngFor="let item of stockUuidToNotesMap.get(stockUuid)">
        <div class="news-display">
          <app-note-container [note]="item"></app-note-container>
        </div>
      </div>
    </app-card>
  </div>
</div>

<!-- <button type="button" mat-button disabled>
    Load More
    <mat-icon>more_horiz</mat-icon>
  </button> -->
