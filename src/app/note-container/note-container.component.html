<div class="header">
  <div>
    <!-- Display Note Type Based on noteType-->
    <ng-container [ngSwitch]="note.noteType">
      <ng-container *ngSwitchCase="'opinion'"> 🎙️ Opinions: </ng-container>
      <ng-container *ngSwitchCase="'number'"> 📊 Numbers: </ng-container>
      <ng-container *ngSwitchCase="'action'"> 🔸 Events: </ng-container>
    </ng-container>
    <app-tag-display [tagUuid]="note?.targets?.[0]"></app-tag-display>
  </div>

  <div>
    📝
    <!-- <app-date-display [date]="note?.createdDate"></app-date-display> -->
    <!-- by {{ creatorName || "invesdea" }} -->
    by Invesdea
  </div>
</div>

<div *ngIf="note.title">
  <strong>{{ note.title }}</strong>
</div>

<ng-container [ngSwitch]="note.noteType">
  <app-opinion-item-display
    *ngSwitchCase="'opinion'"
    [opinion]="note"
    [expanded]="true"
    [shortVersion]="shortVersion"
  ></app-opinion-item-display>
  <app-quote-display
    *ngSwitchCase="'quote'"
    [quote]="note"
    [expanded]="!shortVersion"
  >
  </app-quote-display>
  <ng-container *ngSwitchCase="'action'">
    <app-content-display *ngIf="note.content" [content]="note.content">
    </app-content-display>
  </ng-container>

  <ng-container *ngSwitchCase="'number'">
    <div>
      <app-stats-display [statsDisplay]="note"></app-stats-display>
    </div>
  </ng-container>
  <app-list-display *ngSwitchCase="'list'" [list]="note"> </app-list-display>
  <app-comparison-note *ngSwitchCase="'vote'" [comparisonData]="note">
  </app-comparison-note>
</ng-container>

<div class="toolbar" *ngIf="!environment.production">
  <button mat-icon-button><mat-icon>expand_less</mat-icon></button>
  <span>{{ emotion?.vote || 0 }}</span>
  <button mat-icon-button><mat-icon>expand_more</mat-icon></button>

  <button mat-button>
    Bullish
    <ng-container *ngIf="emotion?.bullish"
      >x {{ emotion?.bullish }}</ng-container
    >
  </button>

  <button mat-button>
    Bearish
    <ng-container *ngIf="emotion?.bearish"
      >x {{ emotion?.bearish }}</ng-container
    >
  </button>

  <button mat-button (click)="onSaveClick()">
    <span *ngIf="emotion?.saved; else unsavedButton">Saved</span
    ><ng-template #unsavedButton>Save</ng-template>
  </button>

  <button mat-button (click)="expanded = !expanded">
    😀 <mat-icon> expand_more </mat-icon>
  </button>
  <button
    right-items
    mat-icon-button
    [matMenuTriggerFor]="menu"
    *ngIf="!environment.production"
  >
    <mat-icon>more_horiz</mat-icon>
  </button>

  <mat-menu #menu="matMenu">
    <button mat-menu-item *ngIf="note?.sourceLink">
      <a href="{{ note.sourceLink }}" target="_blank"> read more </a>
    </button>

    <button mat-menu-item [cdkCopyToClipboard]="note.uuid">Copy UUID</button>

    <button mat-menu-item (click)="openDialog()">Twitter</button>

    <button mat-menu-item (click)="openInstagramDialog(note)">Instagram</button>
  </mat-menu>
</div>

<ng-container *ngIf="expanded">
  <mat-chip-list class="chip-list" [multiple]="true" selectable>
    <mat-chip
      (click)="toggleChip(Emoji.thumbUp)"
      [selected]="chips.has(Emoji.thumbUp)"
      >{{ Emoji.thumbUp }}</mat-chip
    >

    <mat-chip
      (click)="toggleChip(Emoji.rocket)"
      [selected]="chips.has(Emoji.rocket)"
      >{{ Emoji.rocket }}</mat-chip
    >

    <mat-chip
      (click)="toggleChip(Emoji.shit)"
      [selected]="chips.has(Emoji.shit)"
      >{{ Emoji.shit }}</mat-chip
    >
    <mat-chip
      (click)="toggleChip(Emoji.smile)"
      [selected]="chips.has(Emoji.smile)"
      >{{ Emoji.smile }}</mat-chip
    >
    <mat-chip
      (click)="toggleChip(Emoji.sad)"
      [selected]="chips.has(Emoji.sad)"
      >{{ Emoji.sad }}</mat-chip
    >
  </mat-chip-list>
</ng-container>
